/* Autogenerated with kurento-module-creator */

#include "MediaElement.hpp"
#include "MediaElement.hpp"
#include "MediaType.hpp"
#include "ElementConnectionData.hpp"
#include <jsonrpc/JsonSerializer.hpp>
#include <KurentoException.hpp>

namespace kurento
{

void ElementConnectionData::Serialize (JsonSerializer &s)
{

  if (s.IsWriter) {
    s.JsonValue["__type__"] = "ElementConnectionData";
    s.JsonValue["__module__"] = "kurento";

    s.SerializeNVP (source);

    s.SerializeNVP (sink);

    s.SerializeNVP (type);

    s.SerializeNVP (sourceDescription);

    s.SerializeNVP (sinkDescription);

  } else {
    if (!s.JsonValue.isMember ("source") || !s.JsonValue["source"].isConvertibleTo (Json::ValueType::stringValue) ) {
      throw KurentoException (MARSHALL_ERROR,
                              "'source' property should be a string");
    }

    s.SerializeNVP (source);

    if (!s.JsonValue.isMember ("sink") || !s.JsonValue["sink"].isConvertibleTo (Json::ValueType::stringValue) ) {
      throw KurentoException (MARSHALL_ERROR,
                              "'sink' property should be a string");
    }

    s.SerializeNVP (sink);

    if (!s.JsonValue.isMember ("type") || !s.JsonValue["type"].isConvertibleTo (Json::ValueType::stringValue) ) {
      throw KurentoException (MARSHALL_ERROR,
                              "'type' property should be a string");
    }

    s.SerializeNVP (type);

    if (!s.JsonValue.isMember ("sourceDescription") || !s.JsonValue["sourceDescription"].isConvertibleTo (Json::ValueType::stringValue) ) {
      throw KurentoException (MARSHALL_ERROR,
                              "'sourceDescription' property should be a string");
    }

    s.SerializeNVP (sourceDescription);

    if (!s.JsonValue.isMember ("sinkDescription") || !s.JsonValue["sinkDescription"].isConvertibleTo (Json::ValueType::stringValue) ) {
      throw KurentoException (MARSHALL_ERROR,
                              "'sinkDescription' property should be a string");
    }

    s.SerializeNVP (sinkDescription);

  }
}

} /* kurento */

namespace kurento
{

void
Serialize (std::shared_ptr<kurento::ElementConnectionData> &object, JsonSerializer &s)
{
  if (!s.IsWriter && !object) {
    if (!s.JsonValue.isMember ("__type__") || !s.JsonValue["__type__"].isConvertibleTo (Json::ValueType::stringValue) || !s.JsonValue.isMember ("__module__") || !s.JsonValue["__module__"].isConvertibleTo (Json::ValueType::stringValue)) {
      object.reset (new kurento::ElementConnectionData() );
    } else {
      auto ptr = kurento::RegisterParent::createRegister (s.JsonValue["__module__"].asString () + "." + s.JsonValue["__type__"].asString ());

      if (!ptr) {
        throw KurentoException (UNEXPECTED_ERROR,
                                "Type " + s.JsonValue["__type__"].asString () + " does not exist in module " + s.JsonValue["__module__"].asString ());
      }

      object.reset (dynamic_cast <kurento::ElementConnectionData*> (ptr));

      if (!object) {
        delete ptr;
        throw KurentoException (UNEXPECTED_ERROR, "Type " + s.JsonValue["__type__"].asString () + " is not compatible");
      }
    }
  }

  if (object) {
    object->Serialize (s);
  }
}

} /* kurento */